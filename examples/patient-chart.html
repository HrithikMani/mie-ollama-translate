<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise Health - Patient Chart</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="chart-page">

    <!-- Top Navigation -->
    <div class="top-nav">
        <div class="nav-left">
            <a href="ehr-dashboard.html" style="text-decoration: none; color: inherit;"><span style="font-size: 16px;">üè†</span></a>
            <a href="ehr-dashboard.html" class="nav-item">Orders</a>
            <a href="#" class="nav-item alert">Doc Queue <span>(3)</span></a>
        </div>
        <div class="nav-right">
            <span>üë§ Konda, Hrithik Mani - SuperUser</span>
            <span>üïí EST</span>
            <span>üîç</span>
        </div>
    </div>

    <!-- Tab Bar -->
    <div class="tab-bar">
        <div class="tab active">Summary</div>
        <div class="tab">Admin <span>(42)</span></div>
        <div class="tab">Health Surveillance</div>
        <div class="tab">Medical Record <span>(178)</span></div>
        <div class="tab">On Screen Forms</div>
        <div class="tab">Needs Signed <span>(12)</span></div>
        <div class="tab">Documents <span>(283)</span></div>
    </div>

    <!-- Patient Banner -->
    <div class="patient-banner">
        <div class="banner-row">
            <div>
                <span style="font-size: 14px; font-weight: bold;">HART, WILLIAM S.</span>
                <span>70 y/o M</span>
                <span class="tag">DUPLICATE</span>
                <span>Status: <strong>Active</strong></span>
                <span>Tasks: <span class="tag">3</span></span>
                <span>Open Enc: <span class="tag">7</span></span>
            </div>
            <div>
                <span>TEST-10019</span>
            </div>
        </div>
        <div class="banner-row">
            <div>
                <span class="info-label">Date of birth:</span> 11-30-1954
                <span class="info-label">Email:</span> dcornewell@mieweb.com
                <span class="info-label">Employer:</span> Better Corp.
                <span class="info-label">Attending:</span> Selenium Selenium
            </div>
        </div>
        <div class="banner-row red-bg">
            <div>
                <span class="info-label">Allergies:</span> <strong>PENICILLINS , SULFA(SULFONAMIDE ANTIBIOTICS)</strong>
                <span class="info-label" style="margin-left: 10px;">Medications:</span> <span style="color: yellow;">Aspirin Oral, Calcium, Coumadin, Ibuprofen oral, Lasix oral, Lisinopril</span>
            </div>
        </div>
        <div class="banner-row" style="background-color: #cc3333; margin-top: 0;">
             <div>
                <span class="info-label">Comments:</span> Do not release info to siblings.
             </div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
        
        <!-- Left Column -->
        <div class="col-left">
            <!-- Demographics -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üìã Demographics</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content demographics-grid">
                    <div>
                        <strong>Hart, William S.</strong><br>
                        2300 Commonwealth Avenue<br>
                        Fort Wayne, IN 46804<br>
                        Home #: <strong>(260) 444-0099</strong><br>
                        Mobile #: <strong>(260) 437-0001</strong><br>
                        Email: dcornewell@mieweb.com<br>
                        Age: <strong>70</strong>, Birthdate: <strong>11-30-1954</strong>
                        
                        <div class="section-title">Employment Information:</div>
                        <strong>Retired</strong><br>
                        Employee Status: <strong>Active</strong><br>
                        Company Code: <strong>Corporate Office</strong>

                        <div class="section-title">Emergency Contact:</div>
                        <strong>Doug Hart</strong><br>
                        Phone #1: <strong>(260) 444-0055</strong>
                    </div>
                    <div style="text-align: center;">
                        <div class="photo-box">
                            <!-- Random patient photo -->
                            <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="Patient Photo">
                        </div>
                        <a href="#" style="font-size: 10px;">Update Photo</a>
                    </div>
                </div>
            </div>

            <!-- Contacts -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üë• Contacts</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <ul class="simple-list">
                        <li>Attending Physician: <a href="#">Selenium, Selenium</a></li>
                        <li>Family Medicine: <a href="#">Sample, John M.</a></li>
                        <li>Employer: <a href="#">Better Corp.</a></li>
                    </ul>
                </div>
            </div>

            <!-- Medications -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üíä Medications</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <ul class="simple-list">
                        <li><strong>Aspirin</strong> - 81mg Daily</li>
                        <li><strong>Lisinopril</strong> - 10mg Daily</li>
                        <li><strong>Metformin</strong> - 500mg BID</li>
                        <li><strong>Atorvastatin</strong> - 20mg Nightly</li>
                    </ul>
                </div>
            </div>

            <!-- Appointments -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üìÖ Appointments</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <ul class="simple-list">
                        <li>None</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Middle Column -->
        <div class="col-mid">
            <!-- Panel Membership -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>‚öïÔ∏è Panel Membership</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <ul class="simple-list">
                        <li>No Panel Memberships</li>
                    </ul>
                </div>
            </div>

            <!-- Due List -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>‚è∞ Due List</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <div class="section-title">Health Surveillance</div>
                    <div class="checkbox-list">
                        <div><input type="checkbox"> Influenza Injection <span style="float:right;">‚ö°</span></div>
                    </div>

                    <div class="section-title">Imaging</div>
                    <div class="checkbox-list">
                        <div><input type="checkbox"> Xray Knee (specify Left/Right): <span style="float:right;">‚ö°</span></div>
                        <div><input type="checkbox"> Xray Shoulder (specify Left/Right): <span style="float:right;">‚ö°</span></div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 10px;">
                        <button class="action-btn">Requisition Orders</button>
                        <button class="action-btn">Perform Orders</button>
                    </div>
                </div>
            </div>

            <!-- Today's Due List -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üìÖ Today's Due List</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content" style="text-align: center; color: #666;">
                    No pending orders found.
                </div>
            </div>

            <!-- Order Quick Links -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>‚ö° Order Quick Links</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content checkbox-list">
                    <div><input type="checkbox"> Audiogram <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> ECG <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> Influenza Injection <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> Respirator Fit <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> Spirometry <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> TB Skin Test (Mantoux/PPD) <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> Vision Screening <span style="float:right;">‚ö°</span></div>
                    <div><input type="checkbox"> Follow up <span style="float:right;">‚ö°</span></div>
                    
                    <div style="text-align: center; margin-top: 10px;">
                        <button class="action-btn">Perform Selected Orders</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-right">
            <!-- Vitals & Labs (Testing Ignore Logic) -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>ü©∫ Vitals & Labs</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span><span>‚§¢</span></div>
                </div>
                <div class="portlet-content">
                    <ul class="simple-list" style="font-size: 12px;">
                        <li>Height: <strong>69 in</strong> (02-29-2024)</li>
                        <li>Weight: <strong>178 lbs</strong> (02-29-2024)</li>
                        <li>BMI: <strong>26.29</strong> (02-29-2024)</li>
                        <li>Blood Pressure: <strong>120 / 80 mmHg</strong></li>
                        <li>Pulse: <strong>70 bpm</strong> (02-29-2024)</li>
                        <li>Temp: <strong>97.2 F</strong> (02-29-2024)</li>
                        <li>Resp: <strong>14 pm</strong> (02-29-2024)</li>
                        <li>O2 Sat: <strong>98 %</strong> (02-29-2024)</li>
                        <li style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 5px;"><strong>Lab Details:</strong></li>
                        <li>Lab ID: <strong>LAB-992834</strong></li>
                        <li>Specimen: <strong>SP-2024-001</strong></li>
                        <li>Account: <strong>ACCT#99281</strong></li>
                        <li>Ref Range: <strong>13.5 - 17.5 g/dL</strong></li>
                    </ul>
                </div>
            </div>

            <!-- Quick Links -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üîó Quick Links</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content link-list">
                    <a href="#" id="add-provider-link">‚Ä¢ Add New Provider</a>
                    <a href="#">‚Ä¢ Add Appt</a>
                    <a href="#">‚Ä¢ Add Task</a>
                    <a href="#">‚Ä¢ Email</a>
                    <a href="#">‚Ä¢ Checkin</a>
                    <a href="#">‚Ä¢ Prescribe</a>
                    <a href="#">‚Ä¢ Print Chart</a>
                </div>
            </div>

            <!-- Open Encounters -->
            <div class="portlet">
                <div class="portlet-header">
                    <span>üìÇ Open Encounters</span>
                    <div class="icons"><span>‚úèÔ∏è</span><span>‚úñÔ∏è</span></div>
                </div>
                <div class="portlet-content">
                    <div style="font-size: 10px; margin-bottom: 5px;">Open Encounters, 7 records</div>
                    <div class="table-row">
                        <input type="checkbox">
                        <span>Driver Fitness</span>
                        <span>10-02-2018</span>
                    </div>
                    <div class="table-row">
                        <input type="checkbox">
                        <span>Visit</span>
                        <span>12-05-2022</span>
                    </div>
                    <div class="table-row">
                        <input type="checkbox">
                        <span>Exam</span>
                        <span>02-04-2025</span>
                    </div>
                    <div class="table-row">
                        <input type="checkbox">
                        <span>Current (Release)</span>
                        <span>11-21-2025</span>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Dynamic Modal Container (Empty initially) -->
    <!-- Modal is now created via JavaScript to test MutationObserver -->

    <!-- Import the Translation Script -->
    <script src="../frontend/main.js"></script>

    <script>
        // Dynamic Modal Logic
        const btn = document.getElementById('add-provider-link');

        function createAndShowModal() {
            // Create modal elements dynamically
            const modalOverlay = document.createElement('div');
            modalOverlay.id = 'provider-modal';
            modalOverlay.className = 'modal-overlay active'; // 'active' class makes it visible in CSS

            modalOverlay.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <span>Add New Provider</span>
                        <span class="modal-close">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Provider Name:</label>
                            <input type="text" placeholder="Enter provider name">
                        </div>
                        <div class="form-group">
                            <label>Specialty:</label>
                            <select>
                                <option value="">Select Specialty</option>
                                <option value="cardiology">Cardiology</option>
                                <option value="dermatology">Dermatology</option>
                                <option value="neurology">Neurology</option>
                                <option value="pediatrics">Pediatrics</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>NPI Number:</label>
                            <input type="text" placeholder="Enter NPI number">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="action-btn" id="cancel-provider">Cancel</button>
                        <button class="action-btn" style="background-color: #d9534f; color: white; border-color: #d9534f;">Save Provider</button>
                    </div>
                </div>
            `;

            // Append to DOM - This should trigger MutationObserver
            document.body.appendChild(modalOverlay);

            // Setup close handlers
            const closeBtn = modalOverlay.querySelector('.modal-close');
            const cancelBtn = modalOverlay.querySelector('#cancel-provider');

            function closeModal() {
                document.body.removeChild(modalOverlay);
            }

            closeBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);
            
            // Close when clicking outside
            modalOverlay.addEventListener('click', (e) => {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });
        }

        btn.addEventListener('click', (e) => {
            e.preventDefault();
            createAndShowModal();
        });
    </script>
</body>
</html>
